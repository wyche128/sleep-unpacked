<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leesa Original: Deep Longevity Analysis</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chosen Palette: Sleep Serenity -->
    <!-- Primary: Slate-800 (Text), Slate-100 (Background) -->
    <!-- Accents: Blue-500 (Primary Interaction), Indigo-600 (Charts), Amber-500 (Warnings), Emerald-500 (Good) -->
    
    <!-- Application Structure Plan: 
         1. Hero Section: High-level summary and introduction to the report's purpose (Living Review).
         2. Mattress Anatomy (Interactive): Users click layers to understand construction materials and their specific role in longevity (Density 3.0pcf focus).
         3. The Time Machine (Core Interaction): A slider-based dashboard allowing users to travel to Year 1, 3, and 5 to see projected performance drift (Firmness, Sagging, Cooling) visualized via Radar and Bar charts.
         4. Sleeper Compatibility Calculator: Interactive selector for weight classes to see specific longevity warnings/recommendations.
         5. The Warranty Gap: A visual explanation of the discrepancy between "softening" and "visible indentation" using a comparative chart.
         6. Conclusion: Summary of findings.
         
         WHY: This structure moves from "What is it?" (Anatomy) to "How does it age?" (Time Machine) to "Is it for me?" (Compatibility) to "What if it fails?" (Warranty), mirroring the buyer's journey and ownership lifecycle.
    -->

    <!-- Visualization & Content Choices:
         1. Anatomy: HTML/CSS Flexbox Stack. Goal: Inform/Structure. Interaction: Hover/Click to reveal density/specs. Justification: CSS is lighter than Canvas for simple rectangles.
         2. Performance Radar: Chart.js Radar. Goal: Change/Compare. Interaction: Slider updates dataset. Justification: Perfect for showing multi-variate degradation (shape shrinking) over time.
         3. Sagging Probability: Chart.js Bar. Goal: Inform. Interaction: Updates with slider. Justification: Clearly displays the rising risk percentage.
         4. Weight Impact: HTML/CSS Traffic Light Logic. Goal: Personalize. Interaction: Button selection updates DOM. Justification: Immediate feedback on suitability.
         5. Warranty Gap: Chart.js Bar (Side-by-Side). Goal: Relationships. Interaction: Static view of the disparity. Justification: Visualizes the "invisible" problem of softening vs indentation.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #1e293b; /* Slate 800 */
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Fixed height for consistency */
            max-height: 400px;
        }

        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }

        .layer-block {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .layer-block:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .layer-selected {
            border-left: 8px solid #3b82f6; /* Blue 500 */
            background-color: #eff6ff;
        }

        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center">
                    <span class="text-2xl font-bold text-indigo-600">LivingReview</span>
                    <span class="ml-2 text-slate-500 text-sm font-medium">| Leesa Original Analysis</span>
                </div>
                <div class="hidden sm:flex space-x-8">
                    <a href="#anatomy" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium">Anatomy</a>
                    <a href="#performance" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium">Performance Drift</a>
                    <a href="#compatibility" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium">Sleeper Calculator</a>
                    <a href="#warranty" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium">Warranty Gap</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold text-slate-900 sm:text-5xl sm:tracking-tight lg:text-6xl">
                Leesa Original Mattress
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-500">
                A deep, evidence-based analysis of durability and performance drift over 5 years.
            </p>
            <div class="mt-8 flex justify-center gap-4">
                <div class="bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-100">
                    <span class="block text-xs font-semibold text-indigo-500 uppercase">Construction</span>
                    <span class="block text-lg font-bold text-slate-800">All-Foam (10")</span>
                </div>
                <div class="bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-100">
                    <span class="block text-xs font-semibold text-indigo-500 uppercase">Primary Risk</span>
                    <span class="block text-lg font-bold text-slate-800">Softening</span>
                </div>
                <div class="bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-100">
                    <span class="block text-xs font-semibold text-indigo-500 uppercase">Ideal Life</span>
                    <span class="block text-lg font-bold text-slate-800">~5-7 Years</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- SECTION 1: ANATOMY -->
        <section id="anatomy" class="py-12 bg-slate-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-extrabold text-slate-900">Anatomy & Construction</h2>
                    <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">
                        Understanding the materials is crucial to predicting longevity. The Leesa Original uses a 3-layer foam design. Click the layers below to inspect the specifications and durability implications.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <!-- Layer Visualization (Interactive Stack) -->
                    <div class="flex flex-col space-y-2 select-none" id="layer-stack">
                        <!-- Top Layer -->
                        <div class="layer-block bg-blue-200 border-2 border-blue-300 rounded-lg p-6 relative h-24 flex items-center justify-center layer-selected" onclick="selectLayer(0)">
                            <div class="text-center">
                                <span class="block font-bold text-blue-900">Top Layer (2")</span>
                                <span class="text-sm text-blue-800">Aerated Polyfoam</span>
                            </div>
                        </div>
                        <!-- Middle Layer -->
                        <div class="layer-block bg-indigo-200 border-2 border-indigo-300 rounded-lg p-6 relative h-24 flex items-center justify-center" onclick="selectLayer(1)">
                            <div class="text-center">
                                <span class="block font-bold text-indigo-900">Middle Layer (2")</span>
                                <span class="text-sm text-indigo-800">Memory Foam (3.0 pcf)</span>
                            </div>
                        </div>
                        <!-- Base Layer -->
                        <div class="layer-block bg-slate-300 border-2 border-slate-400 rounded-lg p-6 relative h-40 flex items-center justify-center" onclick="selectLayer(2)">
                            <div class="text-center">
                                <span class="block font-bold text-slate-800">Base Layer (6")</span>
                                <span class="text-sm text-slate-700">High-Density Support Foam</span>
                            </div>
                        </div>
                    </div>

                    <!-- Layer Details Panel -->
                    <div class="bg-white rounded-xl shadow-lg p-8 border border-slate-200 h-full flex flex-col justify-center">
                        <h3 class="text-2xl font-bold text-slate-900 mb-2" id="layer-title">Top Layer: Aerated Polyfoam</h3>
                        <div class="w-16 h-1 bg-indigo-500 mb-4"></div>
                        <p class="text-slate-600 mb-6" id="layer-desc">
                            Designed to provide a responsive, latex-like feel and promote airflow. This generation (Gen 2) replaced the older "Avena" foam to improve motion isolation.
                        </p>
                        
                        <div class="bg-slate-50 rounded-lg p-4 border border-slate-100">
                            <h4 class="font-semibold text-sm text-slate-500 uppercase tracking-wider mb-2">Longevity Factor</h4>
                            <p class="text-slate-800 font-medium" id="layer-factor">
                                High Resilience. This layer takes the immediate impact of movement and is generally durable against surface tearing, though it relies on the layer below for contouring support.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: PERFORMANCE DRIFT (TIME MACHINE) -->
        <section id="performance" class="py-16 bg-white border-t border-slate-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-extrabold text-slate-900">Performance Drift Analysis</h2>
                    <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">
                        Use the slider to travel through time (0 to 5 years). Observe how the mattress performance profile degrades, specifically regarding firmness softening and support stability.
                    </p>
                </div>

                <!-- Timeline Slider -->
                <div class="max-w-3xl mx-auto mb-12">
                    <div class="flex justify-between text-sm font-bold text-slate-400 mb-2">
                        <span>New (Year 0)</span>
                        <span>Year 1</span>
                        <span>Year 3</span>
                        <span>Year 5</span>
                    </div>
                    <input type="range" min="0" max="3" value="0" class="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb" id="time-slider">
                    <div class="text-center mt-4">
                        <span class="inline-block bg-indigo-600 text-white px-4 py-1 rounded-full text-sm font-bold" id="year-display">Current View: Brand New</span>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    
                    <!-- Chart 1: Performance Radar -->
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 shadow-sm">
                        <h3 class="text-lg font-bold text-slate-800 mb-2 text-center">Performance Profile Shape</h3>
                        <p class="text-sm text-slate-500 text-center mb-6">Visualizing the loss of key attributes over time.</p>
                        <div class="chart-container">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>

                    <!-- Chart 2: Sagging Probability -->
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 shadow-sm">
                        <h3 class="text-lg font-bold text-slate-800 mb-2 text-center">Risk of Sagging (>0.5")</h3>
                        <p class="text-sm text-slate-500 text-center mb-6">Probability of visible body impressions developing.</p>
                        <div class="chart-container">
                            <canvas id="barChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Textual Insights Container -->
                <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6" id="drift-insights">
                    <!-- Dynamic cards injected via JS -->
                </div>

            </div>
        </section>

        <!-- SECTION 3: SLEEPER COMPATIBILITY -->
        <section id="compatibility" class="py-16 bg-slate-100">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-extrabold text-slate-900">Sleeper Compatibility Calculator</h2>
                    <p class="mt-4 text-lg text-slate-600">
                        The density of the comfort and support foams (specifically the 3.0 pcf middle layer) dictates longevity based on sleeper weight. Select your weight range to see the forecast.
                    </p>
                </div>

                <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div class="p-8 border-b border-slate-100">
                        <h3 class="text-sm font-bold text-slate-500 uppercase tracking-wide mb-4 text-center">Select Sleeper Weight</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button class="weight-btn py-3 px-4 border-2 border-slate-200 rounded-lg font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 focus:outline-none transition-colors" data-weight="0">≤ 150 lb</button>
                            <button class="weight-btn py-3 px-4 border-2 border-slate-200 rounded-lg font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 focus:outline-none transition-colors" data-weight="1">151–200 lb</button>
                            <button class="weight-btn py-3 px-4 border-2 border-indigo-500 bg-indigo-50 text-indigo-700 rounded-lg font-bold focus:outline-none transition-colors shadow-sm" data-weight="2">201–250 lb</button>
                            <button class="weight-btn py-3 px-4 border-2 border-slate-200 rounded-lg font-bold text-slate-600 hover:border-indigo-500 hover:text-indigo-600 focus:outline-none transition-colors" data-weight="3">> 250 lb</button>
                        </div>
                    </div>

                    <div class="p-8 bg-slate-50 text-center" id="recommendation-panel">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-amber-100 text-amber-600 mb-4 text-2xl font-bold">
                            !
                        </div>
                        <h3 class="text-2xl font-bold text-slate-900 mb-2">Accelerated Wear</h3>
                        <p class="text-slate-600 mb-6">
                            Softening and support loss are often reported within <span class="font-bold text-slate-900">2–3 years</span>. The 3.0 pcf memory foam layer may compress faster than desired under this load.
                        </p>
                        <div class="inline-block bg-white px-6 py-3 rounded-full border border-slate-200 shadow-sm text-sm font-medium text-slate-500">
                            Est. Lifespan: <span class="text-amber-600 font-bold">2-4 Years</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: WARRANTY GAP -->
        <section id="warranty" class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl font-extrabold text-slate-900 mb-6">The Warranty "Gap"</h2>
                        <div class="prose prose-slate text-slate-600">
                            <p class="mb-4">
                                A significant challenge for owners is the discrepancy between <strong>felt softening</strong> and <strong>measurable indentation</strong>.
                            </p>
                            <p class="mb-4">
                                Leesa's warranty requires a visible indentation greater than <strong>1.5 inches</strong>. However, many owners report back pain and loss of support (softening) long before the mattress physically sags that deep.
                            </p>
                            <ul class="list-disc pl-5 space-y-2 mb-6">
                                <li><strong>Softening:</strong> The foam loses resilience, feeling "mushy."</li>
                                <li><strong>Indentation:</strong> The foam physically collapses and doesn't rebound.</li>
                                <li><strong>The Result:</strong> Claims are often denied because the mattress "looks" fine, even if it "feels" failed.</li>
                            </ul>
                            <div class="bg-amber-50 border-l-4 border-amber-500 p-4">
                                <p class="text-sm text-amber-800">
                                    <strong>Warning:</strong> The warranty is void if slats are > 5.5 inches apart.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                        <h3 class="text-lg font-bold text-slate-800 mb-4 text-center">Physical Sag vs. Warranty Threshold</h3>
                        <div class="chart-container">
                            <canvas id="warrantyChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-slate-400 mt-4">Graph illustrates typical depth of body impressions vs required depth for claim.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: CONCLUSION -->
        <footer class="bg-slate-900 text-white py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-2xl font-bold mb-4">Summary Verdict</h2>
                <p class="max-w-3xl mx-auto text-slate-300 mb-8">
                    The Leesa Original is a well-designed bed-in-a-box suitable for average-weight sleepers looking for a medium-firm feel and good motion isolation. However, its longevity is limited by the 3.0 pcf memory foam layer, leading to probable softening around the 3-year mark. Heavier sleepers (>200 lbs) should anticipate a shorter lifespan.
                </p>
                <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-slate-500">
                    <p>&copy; 2024 Living Review Analysis. Generated based on provided source report.</p>
                    <p class="mt-2 md:mt-0">Source Material: Independent Labs, Owner Reports, Spec Sheets</p>
                </div>
            </div>
        </footer>

    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORE ---
        
        // 1. Anatomy Data
        const layers = [
            {
                title: "Top Layer (2\")",
                subtitle: "Aerated Polyfoam",
                desc: "Designed to provide a responsive, latex-like feel and promote airflow. This generation (Gen 2) replaced the older 'Avena' foam to improve motion isolation.",
                factor: "High Resilience. Provides immediate surface comfort and cooling. Less prone to permanent indentations than memory foam."
            },
            {
                title: "Middle Layer (2\")",
                subtitle: "Memory Foam (3.0 pcf)",
                desc: "Intended for pressure relief and contouring. The 3.0 lb/ft³ density is the industry standard baseline.",
                factor: "CRITICAL WEAR POINT. 3.0 pcf is the minimum for durability. This layer is most susceptible to softening, leading to the 'hammocking' effect."
            },
            {
                title: "Base Layer (6\")",
                subtitle: "High-Density Core Support",
                desc: "The foundational support layer that gives the mattress its structure and shape.",
                factor: "High Durability. Rarely fails catastrophically, but relies on the layers above to distribute load evenly."
            }
        ];

        // 2. Timeline Data (0, 1, 3, 5 years)
        const timelineData = {
            labels: ['Day 1', 'Year 1', 'Year 3', 'Year 5'],
            // Radar Data: Normalized 0-10 scale (10 = Best/New)
            radar: {
                sagging: [10, 9.5, 8, 6],    // Resistance to sagging
                firmness: [10, 9, 7.5, 5],   // Retention of firmness
                edge: [10, 10, 8.5, 7.5],    // Edge stability
                cooling: [10, 10, 10, 9]     // Cooling efficiency
            },
            // Probability Data: Percentage Chance
            saggingProb: [0, 5, 20, 35], // % chance of >0.5" sag
            
            // Textual descriptions for each year
            insights: [
                { // Year 0
                    title: "Brand New Status",
                    firmness: "6/10 (Medium-Firm)",
                    risk: "None. 100% Support.",
                    note: "Initial break-in period may soften feel slightly in first 30 days."
                },
                { // Year 1
                    title: "1 Year Status",
                    firmness: "Softens by ~0.5 points",
                    risk: "Low (<5% Issue Rate)",
                    note: "Mattress settles. Most owners remain highly satisfied. Zero visible sag expected."
                },
                { // Year 3
                    title: "3 Year Status",
                    firmness: "Softens by 1.0–1.5 points",
                    risk: "Moderate (Softening Begins)",
                    note: "Critical Turning Point. Heavier sleepers notice 'hammocking'. 15-20% report issues."
                },
                { // Year 5
                    title: "5 Year Status",
                    firmness: "Softens by 2.0+ points",
                    risk: "High (>30% Issue Rate)",
                    note: "End of optimal life for many. Significant loss of support. Indentations likely > 0.5\"."
                }
            ]
        };

        // 3. Weight Compatibility Data
        const weightProfiles = [
            { // <= 150
                label: "≤ 150 lb",
                verdict: "Excellent",
                color: "text-emerald-600",
                bg: "bg-emerald-100",
                icon: "✓",
                desc: "Likely to maintain adequate support for 7–8 years. Minimal stress on foams.",
                life: "7-8 Years"
            },
            { // 151-200
                label: "151–200 lb",
                verdict: "Standard",
                color: "text-blue-600",
                bg: "bg-blue-100",
                icon: "i",
                desc: "Performance drift noticeable around year 4. Standard wear pattern expected.",
                life: "4-6 Years"
            },
            { // 201-250
                label: "201–250 lb",
                verdict: "Accelerated Wear",
                color: "text-amber-600",
                bg: "bg-amber-100",
                icon: "!",
                desc: "Softening and support loss often reported within 2–3 years due to 3.0 pcf foam compression.",
                life: "2-4 Years"
            },
            { // > 250
                label: "> 250 lb",
                verdict: "Not Recommended",
                color: "text-red-600",
                bg: "bg-red-100",
                icon: "X",
                desc: "High risk of premature 'bottoming out' and support failure. Foam density insufficient for load.",
                life: "< 2 Years"
            }
        ];

        // --- GLOBAL VARIABLES & STATE ---
        let radarChartInstance = null;
        let barChartInstance = null;
        let warrantyChartInstance = null;
        let currentYearIndex = 0;

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            updateDashboard(0);
            initWeightSelector();
            
            // Set default weight selection (201-250 for demonstration as per original design plan)
            updateWeightPanel(2); 

            // Slider Listener
            document.getElementById('time-slider').addEventListener('input', (e) => {
                updateDashboard(parseInt(e.target.value));
            });
        });

        // --- FUNCTIONS ---

        // 1. Layer Selector Logic
        function selectLayer(index) {
            const data = layers[index];
            
            // Update UI Styling
            document.querySelectorAll('.layer-block').forEach((el, i) => {
                if(i === index) {
                    el.classList.add('layer-selected', 'border-l-8', 'bg-opacity-100');
                    el.classList.remove('bg-opacity-50');
                } else {
                    el.classList.remove('layer-selected', 'border-l-8');
                    // el.classList.add('bg-opacity-50'); // Optional: dim others
                }
            });

            // Update Content
            document.getElementById('layer-title').textContent = data.title;
            document.getElementById('layer-desc').textContent = data.desc;
            document.getElementById('layer-factor').textContent = data.factor;
            
            // Color coding the title underline
            const underline = document.querySelector('#layer-title + div');
            if(index === 0) underline.className = "w-16 h-1 bg-blue-500 mb-4";
            if(index === 1) underline.className = "w-16 h-1 bg-indigo-500 mb-4";
            if(index === 2) underline.className = "w-16 h-1 bg-slate-500 mb-4";
        }

        // 2. Dashboard Update Logic (Time Machine)
        function updateDashboard(index) {
            currentYearIndex = index;
            const labels = ["Brand New", "1 Year Later", "3 Years Later", "5 Years Later"];
            document.getElementById('year-display').textContent = `View: ${labels[index]}`;

            // Update Charts
            updateRadarChart(index);
            updateBarChart(index);

            // Update Text Cards
            const info = timelineData.insights[index];
            const container = document.getElementById('drift-insights');
            container.innerHTML = `
                <div class="bg-white p-4 rounded-lg border-l-4 border-indigo-500 shadow-sm">
                    <h4 class="text-xs font-bold text-gray-400 uppercase">Firmness Feel</h4>
                    <p class="text-lg font-bold text-slate-800">${info.firmness}</p>
                </div>
                <div class="bg-white p-4 rounded-lg border-l-4 border-amber-500 shadow-sm">
                    <h4 class="text-xs font-bold text-gray-400 uppercase">Risk Level</h4>
                    <p class="text-lg font-bold text-slate-800">${info.risk}</p>
                </div>
                <div class="bg-white p-4 rounded-lg border-l-4 border-slate-500 shadow-sm">
                    <h4 class="text-xs font-bold text-gray-400 uppercase">Analyst Note</h4>
                    <p class="text-sm text-slate-600 mt-1">${info.note}</p>
                </div>
            `;
        }

        // 3. Weight Selector Logic
        function initWeightSelector() {
            const buttons = document.querySelectorAll('.weight-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Reset buttons
                    buttons.forEach(b => {
                        b.classList.remove('border-indigo-500', 'bg-indigo-50', 'text-indigo-700', 'border-2');
                        b.classList.add('border-slate-200', 'text-slate-600', 'border-2');
                    });
                    // Activate clicked
                    e.target.classList.remove('border-slate-200', 'text-slate-600');
                    e.target.classList.add('border-indigo-500', 'bg-indigo-50', 'text-indigo-700');
                    
                    updateWeightPanel(parseInt(e.target.dataset.weight));
                });
            });
        }

        function updateWeightPanel(index) {
            const data = weightProfiles[index];
            const panel = document.getElementById('recommendation-panel');
            
            panel.innerHTML = `
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full ${data.bg} ${data.color} mb-4 text-2xl font-bold">
                    ${data.icon}
                </div>
                <h3 class="text-2xl font-bold text-slate-900 mb-2">${data.verdict}</h3>
                <p class="text-slate-600 mb-6">
                    ${data.desc}
                </p>
                <div class="inline-block bg-white px-6 py-3 rounded-full border border-slate-200 shadow-sm text-sm font-medium text-slate-500">
                    Est. Lifespan: <span class="${data.color} font-bold">${data.life}</span>
                </div>
            `;
        }

        // --- CHART CONFIGURATIONS ---

        function initCharts() {
            // Chart Defaults
            Chart.defaults.font.family = "'Segoe UI', 'Helvetica', 'Arial', sans-serif";
            Chart.defaults.color = '#64748b';

            // 1. Radar Chart (Performance Shape)
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            radarChartInstance = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['Sagging Resistance', 'Firmness Retention', 'Edge Support', 'Cooling'],
                    datasets: [{
                        label: 'Performance Score (10=New)',
                        data: [10, 10, 10, 10], // Initial data
                        backgroundColor: 'rgba(79, 70, 229, 0.2)', // Indigo 600, low opacity
                        borderColor: '#4f46e5',
                        pointBackgroundColor: '#4f46e5',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#e2e8f0' },
                            pointLabels: {
                                font: { size: 12, weight: 'bold' },
                                color: '#1e293b'
                            },
                            suggestedMin: 0,
                            suggestedMax: 10,
                            ticks: { display: false } // Hide numbers for cleaner look
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (context) => `Score: ${context.raw}/10`
                            }
                        }
                    }
                }
            });

            // 2. Bar Chart (Sagging Probability)
            const ctxBar = document.getElementById('barChart').getContext('2d');
            barChartInstance = new Chart(ctxBar, {
                type: 'bar',
                data: {
                    labels: ['Risk of Visible Sagging'],
                    datasets: [{
                        label: 'Probability (%)',
                        data: [0],
                        backgroundColor: '#fbbf24', // Amber 400
                        borderRadius: 4,
                        barThickness: 50
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bar
                    scales: {
                        x: {
                            min: 0,
                            max: 100,
                            grid: { display: true },
                            title: { display: true, text: 'Probability Percentage (%)' }
                        },
                        y: { display: false }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            // 3. Warranty Chart (Static Comparison)
            const ctxWarranty = document.getElementById('warrantyChart').getContext('2d');
            warrantyChartInstance = new Chart(ctxWarranty, {
                type: 'bar',
                data: {
                    labels: ['Typical Sag (Year 3)', 'Warranty Threshold'],
                    datasets: [{
                        label: 'Inches',
                        data: [0.75, 1.5], // 0.75 is typical annoying sag, 1.5 is warranty
                        backgroundColor: ['#94a3b8', '#dc2626'], // Slate vs Red
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Depth (Inches)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                footer: (items) => {
                                    if(items[0].dataIndex === 0) return "Causes pain, but claim denied.";
                                    return "Required for successful claim.";
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update Radar Chart
        function updateRadarChart(index) {
            if(!radarChartInstance) return;

            const rData = timelineData.radar;
            const newData = [
                rData.sagging[index],
                rData.firmness[index],
                rData.edge[index],
                rData.cooling[index]
            ];
            
            radarChartInstance.data.datasets[0].data = newData;
            
            // Color Shift: If average score drops below 7, turn orange/red
            const avg = newData.reduce((a,b)=>a+b)/4;
            if(avg < 7) {
                radarChartInstance.data.datasets[0].borderColor = '#ea580c'; // Orange
                radarChartInstance.data.datasets[0].backgroundColor = 'rgba(234, 88, 12, 0.2)';
            } else {
                radarChartInstance.data.datasets[0].borderColor = '#4f46e5'; // Indigo
                radarChartInstance.data.datasets[0].backgroundColor = 'rgba(79, 70, 229, 0.2)';
            }
            radarChartInstance.update();
        }

        // Update Bar Chart
        function updateBarChart(index) {
             if(!barChartInstance) return;

            const prob = timelineData.saggingProb[index];
            barChartInstance.data.datasets[0].data = [prob];
            // Change color based on severity
            if(prob > 25) barChartInstance.data.datasets[0].backgroundColor = '#ef4444'; // Red
            else if (prob > 10) barChartInstance.data.datasets[0].backgroundColor = '#f59e0b'; // Amber
            else barChartInstance.data.datasets[0].backgroundColor = '#10b981'; // Emerald
            
            barChartInstance.update();
        }

    </script>
</body>
</html>